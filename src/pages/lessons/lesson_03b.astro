---
import MainLayout from "@/layouts/MainLayout.astro"
import Footer from "@/components/Footer.astro"
import LssnArt from "@/components/LssnArt.astro"
import ChaptrSect from "@/components/ChaptrSect.astro"
import ChaptrSubSect from "@/components/ChaptrSubSect.astro"
const ruta = '../../src/assets/img/'
---
<MainLayout>
  <LssnArt artClass="lssn__03b" h2Title="Eventos en la UI" slot="mainContent">
    <ChaptrSect h3Title="Eventos del Mouse" codeText="">
      <ChaptrSubSect h4Title="Tipo de enventos" codeText="">
        <p class="chaptrSubSect__p">Conocemos ya algunos tipos de eventos del mouse</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>mousedown/mouseup</code>: Se oprime/suelta el botÃ³n del ratÃ³n sobre un elemento.</li>
          <li class="chaptrSubSectUl__li"><code>mouseover/mouseout</code>: El puntero del mouse se mueve sobre/sale de un elemento.</li>
          <li class="chaptrSubSectUl__li"><code>mousemove</code>: Cualquier movimiento del mouse sobre un elemento activa el evento.</li>
          <li class="chaptrSubSectUl__li"><code>click</code>: Se activa despuÃ©s de mousedown y un mouseup enseguida sobre el mismo elemento si se usÃ³ el botÃ³n.</li>
          <li class="chaptrSubSectUl__li"><code>dbclick</code>: Se activa despuÃ©s de dos clicks seguidos sobre el mismo elemento. Hoy en dÃ­a se usa raramente.</li>
          <li class="chaptrSubSectUl__li"><code>contextmenu</code>: Se activa al pulsar el botÃ³n derecho del ratÃ³n. Existen otras formas de abrir el menÃº contextual, por ejemplo: usando un comando especial de teclado tambiÃ©n puede activarse, de manera que no es exactamente un evento exclusivo del mouse.</li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Orden de eventos" codeText="">
        <p class="chaptrSubSect__p">Por ejemplo , un click izquierdo primero activa <code>mousedown</code> cuando se presiona el botÃ³n, enseguida <code>mouseup</code> y <code>click</code> cuando se suelta. En casos asÃ­, el orden es fijo. Es decir, los controladores son llamados en el siguiente orden <code>mousedown</code> â†’ <code>mouseup</code> â†’ <code>click</code></p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="DetecciÃ³n de botones del mouse" codeText="">
        <p class="chaptrSubSect__p">La propiedad <code>event.button</code> identifica quÃ© botÃ³n activÃ³ el evento</p>
        <table class="chaptrSubSect__table">
          <thead>
            <tr>
              <th>BotÃ³n del mouse</th>
              <th>Valor</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="tdBold">BotÃ³n izquierdo</td>
              <td class="tdCenter">0</td>
            </tr>
            <tr>
              <td class="tdBold">BotÃ³n central</td>
              <td class="tdCenter">1</td>
            </tr>
            <tr>
              <td class="tdBold">BotÃ³n derecho</td>
              <td class="tdCenter">2</td>
            </tr>
          </tbody>
        </table>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;button id='btn'&gt;CLickMe&lt;/button&gt; Âº/

          /* js */
          const Â·btn = document.getElementById('btn');
          
          Â·btn.addEventListener('mousedown', (Ã§event) =&gt; &#123;
            switch (Ã§event.Âºbutton)&#123;
              â€¢case 0:
                console.log('Click izquierdo');
                break;
              â€¢case 1:
                console.log('Click central');
                break;
              â€¢case 2:
                console.log('Click derecho');
                break;
              default:
                console.log('Otro botÃ³n o acciÃ³n desconocida')
            &#125;
          &#125;);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Teclas modificadores" codeText="">
        <p class="chaptrSubSect__p">Los eventos incluyen informaciÃ³n sobre teclas como <code>Shift</code>, <code>Alt</code>, <code>Ctrl</code> y <code>Meta</code> (Cmd en Mac)</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>event.shiftKey</code>, <code>event.altKey</code>, <code>event.ctrlKey</code>, <code>event.metaKey</code>.</li>
          <li class="chaptrSubSectUl__li">Estas propiedades son <code>true</code> si la tecla estaba presionada al activarse el evento.</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;button id='modBtn'&gt;Shift + Click&lt;/button&gt; Âº/

          /* js */
          const Â·modBtn = document.getElementById('modBtn');
          
          Â·modBtn.addEventListener('click', (Ã§event) =&gt; &#123;
            if (Ã§event.ÂºshiftKey)&#123;
              console.log('Click + Shift presionado');
            &#125; else &#123;
              console.log('Click normal');
            &#125;
          &#125;);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Coordenadas del Mouse" codeText="">
        <p class="chaptrSubSect__p">Hay 2 tipos de propiedades relaccionadas con el mouse</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>ÂºclientX/Y</code>: Coordenadas relativas a la ventana.@</li>Âº
          <li clas@s="chaptrSubSectUl__li"><code>pageX/Y</code>: Coordenadas relativas al documento, independientemente del desplazamiento de la pÃ¡gina.</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id='tracker' class='tracker'&gt;Mueve el mouse aquÃ­&lt;/div&gt; Âº/

          /* css */
          /Âº .tracker&#123; Âº/
            /Âº inline-size: 10em; Âº/
            /Âº block-size: 10em; Âº/
          /Âº &#125; Âº/

          /* js */
          const Â·tracker = document.getElementById('tracker');
          
          Â·tracker.addEventListener('mousemove', (Ã§event) =&gt; &#123;
            Â·tracker.ÂºtextContent = `/Âº PosiciÃ³n: ($&#123;Ã§event.ÂºclientX&#125;, $&#123;Ã§event.ÂºclientY&#125;) Âº/`;
          &#125;);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="PrevenciÃ³n de comportamientos predeterminados" codeText="">
        <p class="chaptrSubSect__p">Evitar la selecciÃ³n de texto</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">La acciÃ³n predeterminada de <code>mousedown</code> selecciona texto. Esto puede evitarse con <code>event.preventDefault()</code>.</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id='noSelect' class='noSelect'&gt;No puedes seleccionar este texto&lt;/div&gt; Âº/

          /* css */
          /Âº .noSelect&#123; Âº/
            /Âº user-select: none; Âº/
          /Âº &#125; Âº/

          /* js */
          const Â·noSelect = document.getElementById('noSelect');
          
          Â·noSelect.addEventListener('mousedown', (Ã§event) =&gt; &#123;
            Ã§event.@preventDefault();
            console.log('SelecciÃ³n desabilitada');
          &#125;);</pre>
        <p class="chaptrSubSect__p">Evitar copias de texto</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Usar el evento <code>oncopy</code> para bloquear el copiado.</li>
        </ul>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="Moviendo el Mouse" codeText="">
      <ChaptrSubSect h4Title="Eventos" codeText="mouseover/mouseout">
        <p class="chaptrSubSect__p">Se activan cuando el cursor</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>mouseover</code>: Entra a un elemento.</li>
          <li class="chaptrSubSectUl__li"><code>mouseout</code>: Sale de un elemento.</li>
        </ul>
        <p class="chaptrSubSect__p">Estos eventos incluyen una propiedad especial, <code>relatedTarget</code>, que indica el elemento complementario en la transiciÃ³n</p>
        <p class="chaptrSubSect__p">Para <code>mouseover</code></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>event.target</code>: Elemento donde entrÃ³ el mouse.</li>
          <li class="chaptrSubSectUl__li"><code>event.relatedTarget</code>: Elemento desde el que vino el mouse.</li>
        </ul>
        <p class="chaptrSubSect__p">Para <code>mouseout</code></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>event.target</code>: Elemento que el mouse dejÃ³.</li>
          <li class="chaptrSubSectUl__li"><code>event.relatedTarget</code>: Elemento hacia el que se moviÃ³ el mouse.</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id='box'&gt;Mueve el mouse aquÃ­&lt;/div&gt; Âº/

          /* css */
          /Âº .box &#123; Âº/
            /Âº inline-size: 15em; Âº/
            /Âº block-size: 15em; Âº/
          /Âº &#125; Âº/

          /* js */
          const Â·box = document.getElementById('box');

          Â·box.addEventListener('mouseover', (Ã§event) =&gt; &#123;
            console.log(`Entraste en: $&#123;Ã§event.Âºtarget.Âºid&#125;`);
            console.log(`Viniendo desde: $&#123;Ã§event.ÂºrelatedTarget?.Âºid || "window"&#125;`);
          &#125;);

          Â·box.addEventListener('mouseout', (Ã§event) =&gt; &#123;
            console.log(`Saliste de: $&#123;Ã§event.Âºtarget.Âºid&#125;`);
            console.log(`Yendo hacia: $&#123;Ã§event.ÂºrelatedTarget?.Âºid || "window"&#125;`);
          &#125;);
        </pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="PrecauciÃ³n" codeText="relatedTarget = null">
        <p class="chaptrSubSect__p">Si el cursor entra desde <span class="bttn">window</span> o sale hacia <span class="bttn">window</span>, <code>relatedTarget</code> serÃ¡ <code>null</code>. Evita errores verificando antes de acceder a sus propiedades</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id='box' class='box'&gt;Mueve el mouse hacia aqui&lt;/div&gt; Âº/

          /* css */
          /Âº .box&#123; Âº/
            /Âº inline-size; 10em; Âº/
            /Âº block-size; 10em; Âº/
          /Âº &#125; Âº/

          /* js */
          const Â·box = document.getElementById('box');
          
          Â·box.addEventListener('mouseout', (Ã§event) =&gt; &#123;
            if (!Ã§event.ÂºrelatedTarget) &#123;
              console.log('El mouse saliÃ³ hacia la ventana');
              return;
            &#125;
            console.log(`Nuevo elemento: $&#123;Ã§event.ÂºrelatedTarget.ÂºtagName&#125;`);
          &#125;);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Movimientos rÃ¡pidos del mouse" codeText="">
        <p class="chaptrSubSect__p">Si el cursor se mueve rÃ¡pidamente, el navegador puede omitir elementos intermedios</p>
        <p class="chaptrSubSect__p">Por ejemplo, de un elemento <code>A</code> a <code>C</code>, el evento <code>mouseout</code> puede activarse en <code>A</code> y <code>mouseover</code> directamente en <code>C</code>, ignorando <code>B</code></p>
        <p class="chaptrSubSect__p">Esto mejora el rendimiento, pero debemos considerarlo en la lÃ³gica</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Diferencias" codeText="mouseover/mouseenter">
        <p class="chaptrSubSect__p"><code>mouseover</code> y <code>mouseout</code></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><strong>Burbujean:</strong> Los eventos se propagan hacia los padres.</li>
          <li class="chaptrSubSectUl__li">Detectan movimientos hacia elementos descendientes.</li>
          <li class="chaptrSubSectUl__li">Ãštiles para delegaciÃ³n de eventos.</li>
        </ul>
        <p class="chaptrSubSect__p"><code>mouseenter</code> y <code>mouseleave</code></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><strong>No burbujean:</strong> Los eventos no afectan a  los padres.</li>
          <li class="chaptrSubSectUl__li">Ignoran movimientos hacia elementos descendientes.</li>
          <li class="chaptrSubSectUl__li">Simples para detectar entradas y salidas de un elemento como un todo.</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id='parent' class='parent'&gt;Padre Âº/
            /Âº &lt;div id='child' class='child'&gt;Hijo Âº/
            /Âº &lt;/div&gt; Âº/
          /Âº &lt;/div&gt; Âº/

          /* css */
          /Âº .parent&#123; Âº/
            /Âº inline-size: 10em; Âº/
            /Âº block-size: 10em; Âº/
            /Âº background-color: purple; Âº/
          /Âº &#125; Âº/

          /Âº .child&#123; Âº/
            /Âº inline-size: 5em; Âº/
            /Âº block-size: 5em; Âº/
            /Âº background-color: orangered; Âº/
          /Âº &#125; Âº/

          /* js */
          const Â·parent = document.getElementById('parent');
          const Â·child = document.getElementById('child');

          const Â·handleMouseOver = () =&gt; console.log('mouseover en el padre');
          const Â·handleMouseOout = () =&gt; console.log('mouseout en el padre');
          const Â·handleMouseEnter = () =&gt; console.log('mouseenter en el padre');
          const Â·handleMouseLeave = () =&gt; console.log('mouseleave en el padre');
          
          Â·parent.addEventListener('mouseover', Â·handleMouseOver);
          Â·parent.addEventListener('mouseout', Â·handleMouseOut);
          Â·parent.addEventListener('mouseenter', Â·handleMouseEnter);
          Â·parent.addEventListener('mouseleave', Â·handleMouseLeave);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="DelegaciÃ³n de eventos" codeText="mouseover/out">
        <p class="chaptrSubSect__p">La delegaciÃ³n de eventos es Ãºtil cuando tenemos muchos elementos (como celdas en una tabla) y queremos optimizar el rendimiento, en este capÃ­tulo, nos enfocamos en usar <code>mouseover</code> y <code>mouseout</code> para implementar delegaciÃ³n, ya que <code>mouseenter</code> y <code>mouseleave</code> no permiten delegaciÃ³n</p>
        <p class="chaptrSubSect__p">Queremos resaltar las celdas de una tabla al pasar el mouse por encima, (entrada y salida de celdas) usando delegaciÃ³n de eventos. Teniendo en cuenta los siguientes puntos clave</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Detectar si el mouse entra o sale de una celda.</li>
          <li class="chaptrSubSectUl__li">Ignorar transiciones internas (movimientos dentro de la misma celda).</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;ul id='menu' class='menu'&gt; Âº/
            /Âº &lt;li class='inicio'&gt;Inicio&lt;/li&gt; Âº/
            /Âº &lt;li class='acercaDe'&gt;Acerca de&lt;/li&gt; Âº/
            /Âº &lt;li class='servicios'&gt;Servicios&lt;/li&gt; Âº/
            /Âº &lt;li class='contacto'&gt;contacto&lt;/li&gt; Âº/
          /Âº &lt;/ul&gt; Âº/
        </pre>
        <pre class="chaptrSubSect__console wScript">
          /* css */
          /Âº .li &#123; Âº/
            /Âº background-color: black; Âº/
            /Âº border: 2px solid orangered; Âº/
            /Âº color: orangered; Âº/
            /Âº padding: 1em; Âº/
            /Âº margin-block: 0.3em; Âº/
          /Âº &#125; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */

          const Â·menu = document.getElementById('menu');
          let Â·currentItem = null;

          /* Delegar eventos en el menÃº */
          Â·menu.addEventListener('mouseover', (Ã§event) =&gt; &#123;
            const Â·target = Ã§event.Â·target.@closest('li');
            /* Ignorar movimientos fuera del menÃº o dentro del mismo elemento */
            if (!Â·target || Â·target === Â·currentItem || !Â·menu.@contains(Â·target)) return;
            /* Entrar a un nuevo elemento del menÃº */
            Â·currentItem = Â·target;
            @onEnter(Â·target);
          &#125;);

          Â·menu.addEventListener('mouseout', (Ã§event) =&gt; &#123;
            if (!Â·currentItem) return;
            const Â·relatedTarget = Ã§event.Â·relatedTarget;
            /* Ignorar si seguimos dentro del mismo elemento */
            if (Â·relatedTarget && Â·currentItem.@contains(Â·relatedTarget)) return;
            /* Salir del elemento actual */
            @onLeave(Â·currentItem);
            Â·currentItem = null;
          &#125;);

          /* Funciones auxiliares */
          function @onEnter(â€¢item) &#123;
            â€¢item.Âºstyle.Âºcolor = 'black';
            â€¢item.Âºstyle.ÂºfontWeight = Â¬800;
            â€¢item.Âºstyle.ÂºbackgroundColor = 'yellow';
            console.log(`/Âº Entraste en $&#123;item.tagName&#125;.$&#123;item.className&#125; Âº/`);
          &#125;;

          function @onLeave(â€¢item) &#123;
            â€¢item.Âºstyle.Âºcolor = '';
            â€¢item.Âºstyle.ÂºbackgroundColor = '';
            console.log(`/Âº Saliste de $&#123;item.tagName&#125;.$&#123;item.className&#125; Âº/`);
          &#125;;</pre>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="Arrastrar y Soltar" codeText="">
      <ChaptrSubSect h4Title="PorquÃ© usar eventos del ratÃ³n" codeText="">
        <p class="chaptrSubSect__p">La <span class="bttn">API</span> nativa de <span class="bttn">HTML</span> incluye eventos especÃ­ficos para manejar acciones de arrastrar y soltar (<code>dragstart</code>, <code>dragend</code>, etc.), pero tiene importantes limitaciones</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">No permite restringir movimientos, como limitar el arrastre a una direcciÃ³n especÃ­fica (horizontal o vertical).</li>
          <li class="chaptrSubSectUl__li">Es poco flexible al definir las Ã¡reas de inicio del arrastre.</li>
          <li class="chaptrSubSectUl__li">Su soporte en dispositivos mÃ³viles es limitado.</li>
        </ul>
        <p class="chaptrSubSect__p">Por estas razones, es comÃºn implementar arrastrar y soltar mediante eventos del ratÃ³n, que ofrecen un control mÃ¡s granular y son mÃ¡s compatibles.</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Algoritmo bÃ¡sico de" codeText="drag&drop">
        <p class="chaptrSubSect__p">El proceso bÃ¡sico para implementar esta funcionalidad consta de tres pasos principales</p>
        <p class="chaptrSubSect__p"><mark>1:</mark> Preparar el elemento para ser arrastrado (<code>mousedown</code>)
        </p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Definir la posiciÃ³n inicial y cambiar el estilo del elemento.</li>
          <li class="chaptrSubSectUl__li">Asegurarse de que el elemento puede moverse libremente (<code>position: absolute</code>).</li>
        </ul>
        <p class="chaptrSubSect__p"><mark>2:</mark> Mover el elemento con el ratÃ³n (<code>mousemove</code>)</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Actualizar dinÃ¡micamente la posiciÃ³n del elemento siguiendo las coordenadas del cursor.</li>
        </ul>
        <p class="chaptrSubSect__p"><mark>3:</mark> Finalizar el arrastre (<code>mouseup</code>)</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Detener el seguimiento del movimiento del ratÃ³n y realizar cualquier acciÃ³n necesaria al soltar el elemento.</li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="ImplementaciÃ³n detallada" codeText="">
        <p class="chaptrSubSect__p"><strong>1: Preparar el elemento para arrastrar</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Calcula la posiciÃ³n inicial del cursor respecto al elemento con <code>getBoundingClientRect()</code>.</li>
          <li class="chaptrSubSectUl__li">Cambia el posicionamiento a <code>absolute</code> y ajusta <code>zIndex</code> para mantener el elemento en primer plano.</li>
          <li class="chaptrSubSectUl__li">Utiliza <code>document.body.append(element)</code> para asegurarse de que el elemento no sea ocultado por otros.</li>
        </ul>
        <p class="chaptrSubSect__p"><strong>2: Mover el elemento con el ratÃ³n</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">El evento <code>mousemove</code> actualiza la posiciÃ³n del elemento con la funciÃ³n <code>moveAt</code>, asegurando un movimiento suave.</li>
          <li class="chaptrSubSectUl__li">Usa <code>document.elementFromPoint(event.clientX, event.clientY)</code> para identificar elementos debajo del cursor durante el movimiento.</li>
        </ul>
        <p class="chaptrSubSect__p"><strong>3: Finaliza el arrastre</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Elimina los eventos <code>mousemove</code> y <code>mouseup</code> al soltar el ratÃ³n.</li>
          <li class="chaptrSubSectUl__li">Si el elemento es soltado sobre un "droppable" (elemento vÃ¡lido), realiza acciones como aÃ±adir el elemento dentro del droppable.</li>
        </ul>
        <p class="chaptrSubSect__p"><strong>4: Evita el comportamiento nativo</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Desactiva el comportamiento predeterminado de arrastrar con <code>ondragstart</code>.</li>
        </ul>
        <p class="chaptrSubSect__p"><strong>5: Mejoras adicionales</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Los elementos receptores (droppables) son detectados dinÃ¡micamente con <code>elementFromPoint</code> y resaltados.</li>
          <li class="chaptrSubSectUl__li">Se puede aÃ±adir lÃ³gica personalizada dentro de la detecciÃ³n de droppables.</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;section&gt; Âº/
            /Âº &lt;p&gt;Drag the ball&lt;/p&gt; Âº/
            /Âº &lt;img src="https://en.js.cx/clipart/soccer-gate.svg" id='gate' class='droppable'&gt; Âº/
            /Âº &lt;img src="https://en.js.cx/clipart/ball.svg" id='ball'&gt; Âº/
          /Âº &lt;/section&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* css */
          /Âº ï¼ƒgate &#123; Âº/
            /Âº cursor: pointer; Âº/
            /Âº inline-size: 15em; Âº/
            /Âº block-size: 10em; Âº/
            /Âº margin-block-end: 5em; Âº/
          /Âº &#125;Âº/

          /Âº ï¼ƒball &#123; Âº/
            /Âº cursor: pointer; Âº/
            /Âº inline-size: 2em; Âº/
            /Âº block-size: 2em; Âº/
          /Âº &#125;Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          document.addEventListener('DOMContentLoaded', () =&gt; &#123;
            let Â·currentDroppable = null;
            const Â·ball = document.getElementById('ball');
          
            Â·ball.addEventListener('mousedown', (Ã§event) =&gt; &#123;
              let Â·shiftX = Ã§event.ÂºclientX - Â·ball.@getBoundingClientRect().Âºleft;
              let Â·shiftY = Ã§event.ÂºclientY - Â·ball.@getBoundingClientRect().Âºtop;
          
              Â·ball.Âºstyle.Âºposition = 'absolute';
              Â·ball.Âºstyle.ÂºzIndex = Â¬1000;
              document.body.append(Â·ball);
          
              @moveAt(Ã§event.â€¢pageX, Ã§event.â€¢pageY);
          
              function @moveAt(â€¢pageX, â€¢pageY) &#123;
                Â·ball.Âºstyle.Âºleft = â€¢pageX - Â·shiftX + 'px';
                Â·ball.Âºstyle.Âºtop = â€¢pageY - Â·shiftY + 'px';
              &#125;
          
              function @onMouseMove(Ã§event) &#123;
                @moveAt(Ã§event.â€¢pageX, Ã§event.â€¢pageY);
          
                Â·ball.Âºhidden = true;
                let Â·elemBelow = document.@elementFromPoint(Ã§event.ÂºclientX, Ã§event.ÂºclientY);
                Â·ball.Âºhidden = false;
          
                if (!Â·elemBelow) return;
          
                let Â·droppableBelow = Â·elemBelow.closest('.droppable');
                if (Â·currentDroppable !== Â·droppableBelow) &#123;
                  if (Â·currentDroppable) &#123;
                    @leaveDroppable(Â·currentDroppable);
                  &#125;
                  Â·currentDroppable = Â·droppableBelow;
                  if (Â·currentDroppable) &#123;
                    @enterDroppable(Â·currentDroppable);
                  &#125;
                &#125;
              &#125;
          
              document.addEventListener('mousemove', @onMouseMove);
          
              document.addEventListener('mouseup', function @onMouseUp() &#123;
                document.removeEventListener('mousemove', @onMouseMove);
                document.removeEventListener('mouseup', @onMouseUp);
              &#125;);
            &#125;);
          
            Â·ball.addEventListener('dragstart', (Ã§event) =&gt; &#123;
              Ã§event.@preventDefault();
            &#125;);
          
            function @enterDroppable(Â·elem) &#123;
              Â·elem.Âºstyle.Âºbackground = 'pink';
            &#125;
          
            function @leaveDroppable(Â·elem) &#123;
              Â·elem.Âºstyle.Âºbackground = '';
            &#125;
          &#125;);
        </pre>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="Eventos del puntero" codeText="">
      <ChaptrSubSect h4Title="Historia breve" codeText="">
        <p class="chaptrSubSect__p"><mark>Eventos de Mouse:</mark> Fueron los primeros en manejar la interacciÃ³n del usuario, pero son limitados al mouse</p>
        <p class="chaptrSubSect__p"><mark>Eventos TÃ¡ctiles:</mark> Introducidos para dispositivos tÃ¡ctiles (telÃ©fonos y tabletas) y soportan capacidades como multi-touch, pero no abordan dispositivos como lÃ¡pices</p>
        <p class="chaptrSubSect__p"><mark>Eventos de Puntero:</mark> Nacieron para unificar los eventos de entrada en todos los dispositivos seÃ±aladores (mouse, tÃ¡ctil, lÃ¡pices, etc.) y simplificar el manejo de multi-touch</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Tipos de eventos de puntero" codeText="">
        <table class="chaptrSubSect__table">
          <thead>
            <tr>
              <th>Eventos de Puntero</th>
              <th>Evento de Mouse Similar</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="tdCenter">pointerdown</td>
              <td class="tdCenter">mousedown</td>
            </tr>
            <tr>
              <td class="tdCenter">pointerup</td>
              <td class="tdCenter">mouseup</td>
            </tr>
            <tr>
              <td class="tdCenter">pointermove</td>
              <td class="tdCenter">mousemove</td>
            </tr>
            <tr>
              <td class="tdCenter">pointerover</td>
              <td class="tdCenter">mouseover</td>
            </tr>
            <tr>
              <td class="tdCenter">pointeroout</td>
              <td class="tdCenter">mouseout</td>
            </tr>
            <tr>
              <td class="tdCenter">pointerenter</td>
              <td class="tdCenter">mouseenter</td>
            </tr>
            <tr>
              <td class="tdCenter">pointerleave</td>
              <td class="tdCenter">mouseleave</td>
            </tr>
            <tr>
              <td class="tdCenter">pointercancel</td>
              <td class="tdCenter"><i>(No equivalente)</i></td>
            </tr>
            <tr>
              <td class="tdCenter">gotpointercapture</td>
              <td class="tdCenter"><i>(No equivalente)</i></td>
            </tr>
            <tr>
              <td class="tdCenter">lostpointercapture</td>
              <td class="tdCenter"><i>(No equivalente)</i></td>
            </tr>
          </tbody>
        </table>
        <p class="chaptrSubSect__p">Los eventos de puntero extienden los eventos del mouse, agregando compatibilidad con dispositivos tÃ¡ctiles y lÃ¡pices</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Propiedades Ãºnicas de eventos de puntero" codeText="">
        <p class="chaptrSubSect__p">AdemÃ¡s de las propiedades comunes de los eventos del mouse (<code>clientX</code>, <code>clientY</code>, <code>target</code>, etc.), los eventos de puntero aÃ±aden propiedades especÃ­ficas</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>pointerId</code>: Identificador Ãºnico del puntero. Ãštil para manejar multi-touch.</li>
          <li class="chaptrSubSectUl__li"><code>pointerType</code>: Tipo de dispositivo seÃ±alador (<span class="bttn">mouse</span>, <span class="bttn">touch</span>, <span class="bttn">pen</span>).</li>
          <li class="chaptrSubSectUl__li"><code>isPrimary</code>: <code>true</code> si es el puntero principal (ej. primer dedo en multitÃ¡ctil).</li>
          <li class="chaptrSubSectUl__li"><code>pressure</code>: Fuerza de presiÃ³n (0 a 1).</li>
          <li class="chaptrSubSectUl__li"><code>width</code> y <code>height</code>: Dimensiones del Ã¡rea de contacto.</li>
          <li class="chaptrSubSectUl__li"><code>tiltX</code>, <code>tiltY</code>, <code>twist</code>, <code>tangentialPressure</code>: Propiedades adicionales para lÃ¡pices digitales.</li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Ejemplos" codeText="">
        <p class="chaptrSubSect__p"><mark>1:</mark> Diferenciar dispositivos con <code>pointerType</code></p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id="area"&gt; Âº/
            Toca, haz clic o usa un lÃ¡piz aquÃ­.
          /Âº &lt;/div&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·area = document.getElementById('area');

          Â·area.addEventListener('pointerdown', (Ã§event) =&gt; &#123;
            console.log(`/Âº Tipo de dispositivo: $&#123;Ã§event.pointerType&#125; Âº/`);
            if (Ã§event.ÂºpointerType === 'mouse') &#123;
              console.log('/Âº Â¡InteracciÃ³n con mouse! Âº/');
            &#125; else if (Ã§event.ÂºpointerType === 'touch') &#123;
              console.log('/Âº Â¡InteracciÃ³n tÃ¡ctil! Âº/');
            &#125; else if (Ã§event.ÂºpointerType === 'pen') &#123;
              console.log('/Âº Â¡InteracciÃ³n con lÃ¡piz! Âº/');
            &#125;
          &#125;);</pre>
        <p class="chaptrSubSect__p"><mark>2:</mark> Multi-touch con <code>pointerId</code></p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id="area"&gt; Âº/
            Usa varios dedos aquÃ­.
          /Âº &lt;/div&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·touchArea = document.getElementById('touch-area');

          Â·touchArea.addEventListener('pointerdown', (Ã§event) =&gt; &#123;
            console.log(`/Âº Pointer ID: $&#123;Ã§event.pointerId&#125;, Primary: $&#123;Ã§event.isPrimary&#125; Âº/`);
          &#125;);
        
          Â·touchArea.addÃ§EventListener('pointerup', (Ã§event) =&gt; &#123;
            console.log(`/Âº Pointer ID liberado: $&#123;Ã§event.pointerId&#125; Âº/`);
          &#125;);
        </pre>
        <p class="chaptrSubSect__p"><mark>3:</mark> El evento <code>pointercancel</code> se dispara cuando el navegador interrumpe una interacciÃ³n del puntero, como en acciones nativas (arrastrar y soltar). Podemos evitar esto configurando la propiedad CSS <code>touch-action</code></p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id="area" style="touch-action: none"&gt; Âº/
            Arrastra aquÃ­.
          /Âº &lt;/div&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·draggable = document.getElementById('draggable');

          Â·draggable.addEventListener('pointerdown', (Ã§event) =&gt; &#123;
            console.log('/Âº Inicia arrastre. Âº/');
          &#125;);
        
          Â·draggable.addEventListener('pointercancel', () =&gt; &#123;
            console.log('/Âº InteracciÃ³n cancelada por el navegador. Âº/');
          &#125;);</pre>
        <p class="chaptrSubSect__p"><mark>4:</mark> Podemos "capturar" eventos de puntero y redirigirlos a un elemento especÃ­fico, incluso si el puntero se mueve fuera de Ã©l</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div class="slider" style="position: relative"&gt; Âº/
              /Âº &lt;div class="thimb" style="position: absolute"&gt;&lt;/div&gt; Âº/
          /Âº &lt;/div&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·slider = document.querySelector('.slider');
          const Â·thumb = document.querySelector('.thumb');

          Â·thumb.addEventListener('pointerdown', (Ã§event) =&gt; &#123;
            Â·thumb.@setPointerCapture(Ã§event.ÂºpointerId);
            const Â·sliderRect = Â·slider.@getBoundingClientRect();

            Â·thumb.addEventListener('pointermove', (Ã§event) =&gt; &#123;
              let Â·newLeft = Ã§event.ÂºclientX - Â·sliderRect.Âºleft;
              Â·newLeft = Ã§Math.@max(Â¬0, Ã§Math.@min(Â·newLeft, Â·sliderRect.Âºwidth - Â·thumb.ÂºoffsetWidth));
              Â·thumb.Âºstyle.Âºleft = Â·newLeft + 'px';
            &#125;);

            Â·thumb.addEventListener('pointerup', () =&gt; &#123;
              Â·thumb.Âºonpointermove = null; /* Limpieza */
            &#125;);
          &#125;);</pre>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="Eventos del Teclado" codeText="">
      <ChaptrSubSect h4Title="DefiniciÃ³n" codeText="">
        <p class="chaptrSubSect__p">
          Los eventos del teclado son eventos que se activan cuando el usuario interactÃºa con el teclado. Estos eventos son Ãºtiles para capturar la entrada del usuario y realizar acciones en respuesta a ella.</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Eventos clave" codeText="keydown/keyup">
        <p class="chaptrSubSect__p"><code>keydown:</code> Se activa al presionar una tecla (y se repite si la mantienes pulsada)</p>
        <p class="chaptrSubSect__p"><code>keyup:</code> Se activa al soltar una tecla (sÃ³lo una vez)</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Propiedades del evento" codeText="key/code">
        <p class="chaptrSubSect__p"><code>event.key:</code> Permite obtener el carÃ¡cter</p>
        <p class="chaptrSubSect__p"><code>event.code:</code> Permite obtener el cÃ³digo fÃ­sico de la tecla</p>
        <table class="chaptrSubSect__table">
          <thead>
            <tr>
              <th>Tecla</th>
              <th>event.key</th>
              <th>event.code</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="tdBold">ðŸ…‰</td>
              <td class="tdCenter">z (minÃºscula)</td>
              <td class="tdCenter">KeyZ</td>
            </tr>
            <tr>
              <td class="tdBold">SHIFT + ðŸ…‰</td>
              <td class="tdCenter">Z (mayÃºscula)</td>
              <td class="tdCenter">KeyZ</td>
            </tr>
          </tbody>
        </table>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Evitar acciones predeterminadas" codeText="">
        <p class="chaptrSubSect__p">Algunas teclas tienen comportamientos predeterminados que pueden interferir con la lÃ³gica de la aplicaciÃ³n. Para evitarlos, podemos usar el evento <code>preventDefault()</code></p>
        <pre class="chaptrSubSect__console wScript">
          document.addEventListener('keydown', (Ã§event) =&gt; &#123;
            if (Ã§event.Âºkey === 'F12') &#123;
              Ã§event.@preventDefault();
            &#125;
          &#125;);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Ejemplo final" codeText="">
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;input id="input" type="text" placeholder="TelÃ©fono (ej: +346666666)"&gt; Âº/

          /* js */
          const Â·input = document.querySelector('#Â·input');
          Â·input.addEventListener('keydown', (Ã§event) =&gt; &#123;
            const Â·allowedChars = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
            if (!#isNaN(Ã§event.Âºkey) || Â·allowedChars.@includes(Ã§event.Âºkey)) &#123;
              console.log('CarÃ¡cter permitido');
            &#125; else &#123;
              Ã§event.@preventDefault();
              console.log('CarÃ¡cter no permitido');
              &#125;
          &#125;;</pre>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="Desplazamiento" codeText="">
      <ChaptrSubSect h4Title="Desplazamiento" codeText="">
        <p class="chaptrSubSect__p">El desplazamiento es un evento que se activa cuando el usuario desplaza el contenido de un elemento con barras de desplazamiento. Este evento es Ãºtil para detectar cuÃ¡ndo el usuario interactÃºa con el contenido desplazable y realizar acciones en respuesta a ello.</p>
        <pre class="chaptrSubSect__console wScript">
          Ã§window.addEventListener('scroll', () =&gt; &#123;
            document.getElementById('showScroll').â€¢innerHTML = Ã§window.â€¢pageYOffset + 'px';
          &#125;);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Evitar desplazamiento" codeText="">
        <p class="chaptrSubSect__p">El evento scroll se dispara despuÃ©s de que el desplazamiento ocurre. Es como intentar detener una puerta que ya se abriÃ³: es demasiado tarde. Existen dos enfoques principales para evitar el desplazamiento</p>
        <p class="chaptrSubSect__p"><mark>A)</mark> Bloquear con JavaScript (eventos especÃ­ficos)</p>
        <pre class="chaptrSubSect__console wScript">
          document.addEventListener('wheel', (Ã§event) =&gt; &#123;
            Ã§event.@preventDefault();
          &#125;);</pre>
        <p class="chaptrSubSect__p"><mark>B)</mark> Bloquear con CSS (propiedad overflow)</p>
        <pre class="chaptrSubSect__console wScript">
          /Âº body &#123; Âº/
            /Âº overflow: hidden; Âº/
          /Âº &#125; Âº/</pre>
      </ChaptrSubSect>
    </ChaptrSect>
  </LssnArt>
	<Footer slot="mainFooter" />
</MainLayout>

<!-- 
&lt;&gt;
&#123;&#125;
()&#123;&#125;
ï¹›ï¹œ    Llaves no estiladas
ï¹•     2 puntos no estilizados
â€¢parametro
Â·variable
#variable en Func/if/for
Ã§Objetos
â‹— âˆžResultado
@funcion()
Â¬numbers
objProperty:
ÂºobjProperty
/* comentario */
'/Âº modo texto quita span Âº/'
<p class="chaptrSubSect__p">
<pre class="chaptrSubSect__console wScript">
<table class="chaptrSubSect__table">
<img class="chaptrSubSect__img" src=`${ruta}img13.webp` alt="captura del evento">
<ul class="chaptrSubSect__ul">
<li class="chaptrSubSectUl__li"></li>
ï¼ƒ
-->
