---
import MainLayout from "@/layouts/MainLayout.astro"
import Footer from "@/components/Footer.astro"
import LssnArt from "@/components/LssnArt.astro"
import ChaptrSect from "@/components/ChaptrSect.astro"
import ChaptrSubSect from "@/components/ChaptrSubSect.astro"
const ruta = '../../src/assets/img/'
---
<MainLayout>
  <LssnArt artClass="lssn__02b" h2Title="Introduccion eventos" slot="mainContent">
    <ChaptrSect h3Title="Conceptos bÃ¡sicos" codeText="">
      <ChaptrSubSect h4Title="ExplicaciÃ³n" codeText="">
        <p class="chaptrSubSect__p">Un evento es una acciÃ³n o suceso que ocurre en el navegador (ej: clic del ratÃ³n, carga de una pÃ¡gina, pulsaciÃ³n de una tecla). JavaScript nos permite "escuchar" estos eventos y ejecutar cÃ³digo en respuesta</p>
        <p class="chaptrSubSect__p"><strong>Eventos del mouse</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>click</code></li>
          <li class="chaptrSubSectUl__li"><code>contexmenu</code></li>
          <li class="chaptrSubSectUl__li"><code>mouseover</code>/<code>mouseout</code></li>
          <li class="chaptrSubSectUl__li"><code>mousedown</code><code>mouseup</code></li>
          <li class="chaptrSubSectUl__li"><code>mousemove</code></li>
        </ul>
        <p class="chaptrSubSect__p"><strong>Eventos del teclado</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>keydown</code>/<code>keyup</code></li>
        </ul>
        <p class="chaptrSubSect__p"><strong>Eventos del elemento form</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>submit</code></li>
          <li class="chaptrSubSectUl__li"><code>focus</code></li>
        </ul>
        <p class="chaptrSubSect__p"><strong>Eventos del documento</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>DOMContentLoaded</code></li>
        </ul>
        <p class="chaptrSubSect__p"><strong>Eventos del CSS</strong></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>transitionend</code></li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Controladores de eventos" codeText="">
        <p class="chaptrSubSect__p">Para reaccionar a los eventos podemos asignar un <span class="bttn">handler</span> (controlador) el cual es una funciÃ³n que se ejecuta en caso de un evento. Los handlers son una forma de ejecutar cÃ³digo JavaScript en caso de acciones por parte del usuario. Hay muchas maneras de asignar un <span class="bttn">handler</span> . Vamos a verlas empezando por las mÃ¡s simples</p>
        <p class="chaptrSubSect__p">ğŸ”¥ <mark>Como atributo <span class="bttn">HMTL</span>:</mark> Un <span class="bttn">handler</span> puede ser establecido en el <span class="bttn">HTML</span> con un atributo llamado <code>on&lt;event&gt;</code></p>
        <pre class="chaptrSubSect__console wScript">
          &lt;Â·input Âºvalue='Haz click aquÃ­' onclick='/Âº console.log("click") Âº/' Âºtype='button'&gt;</pre>
        <p class="chaptrSubSect__p">Un atributo <span class="bttn">HTML</span> no es un lugar conveniente para escribir un montÃ³n de cÃ³digo</p>
        <p class="chaptrSubSect__p">ğŸ”¥ <mark>Como propiedad del <span class="bttn">DOM</span>:</mark> Podemos asignar un <span class="bttn">handler</span> usando una propiedad del <span class="bttn">DOM</span> <code>on&lt;event&gt;</code></p>
        <pre class="chaptrSubSect__console wScript">
          &lt;input Âºvalue='BotÃ³n' Âºid='button' Âºtype='button'&gt;

          &lt;script&gt;
            Â·button.@onclick = @function() &#123;
              console.log('/Âº Â¡Click! Âº/');
            &#125;;
          &lt;/script&gt;</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Posibles errores" codeText="">
        <p class="chaptrSubSect__p">Podemos establecer una funciÃ³n existente como un <span class="bttn">handler</span></p>
        <pre class="chaptrSubSect__console wScript">
          function @sayThanks() &#123;
            console.log('/Âº Â¡Gracias! Âº/');
          &#125;

          Â·elem.onclick = @sayThanks;</pre>
        <p class="chaptrSubSect__p">âš ï¸ Pero la funciÃ³n debe ser asignada <mark>sin parÃ©ntesis</mark>. Si agregamos parÃ©ntesis, <code>sayThanks()</code> se convierte en una llamada de funciÃ³n. En ese caso la Ãºltima linea toma el resultado de la ejecuciÃ³n de la funciÃ³n, que es <code>undefined</code> (ya que la funciÃ³n no devuelve nada), y lo asigna a <code>onclick</code>. Esto no funciona</p>
        <p class="chaptrSubSect__p">Por otro lado, en el markup necesitamos los parÃ©ntesis</p>
        <pre class="chaptrSubSect__console wScript">
          &lt;Â·input Âºtype='button' Âºid='button' onclick='@sayThanks()'&gt;</pre>
        <p class="chaptrSubSect__p">Cuando el navegador lee el atributo crea una funciÃ³n <span class="bttn">handler</span> con cuerpo a partir del contenido del atributo</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="" codeText="addEventListener">
        <p class="chaptrSubSect__p">El problema es que no podemos asignar multiples handlers a un solo evento. Hay una forma alternativa de administrar los handlers utilizando los mÃ©todos especiales <code>addEventListener</code> y <code>removeEventListener</code>, que no tienen este problema</p>
        <pre class="chaptrSubSect__console wScript">
          /* Sintaxis */
          Â·element.addEventListener(â€¢event, â€¢handler, [â€¢options]);</pre>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>event</code>: Nombre del evento, por ejemplo: <code>click</code>.</li>
          <li class="chaptrSubSectUl__li"><code>handler</code>: La funciÃ³n handler.</li>
          <li class="chaptrSubSectUl__li"><code>options</code>: Un objeto adicional, opcional, con las propiedades:</li>
            <li class="chaptrSubSectUl__li--sub"><code>once</code>: si es <code>true</code> entonces el listener se remueve automÃ¡ticamente despuÃ©s de activarlo.</li>
            <li class="chaptrSubSectUl__li--sub"><code>capture</code>: la fase en la que se controla el evento. Puede ser <code>false</code>/<code>true</code>.</li>
            <li class="chaptrSubSectUl__li--sub"><code>passive</code>: si es <code>true</code> entonces el <span class="bttn">handler</span> no llamarÃ¡ a <code>preventDefault().</code></li>
        </ul>
        <p class="chaptrSubSect__p">Para eliminar el <span class="bttn">handler</span>, se usa <code>removeEventListener</code></p>
        <pre class="chaptrSubSect__console wScript">
          /* Sintaxis */
          Â·element.removeEventListener(â€¢event, â€¢handler, [â€¢options]);</pre>
        <p class="chaptrSubSect__p">Para eliminar un <span class="bttn">handler</span> deberemos pasar exactamente la misma funciÃ³n que asignamos, y para eso la funciÃ³n debe estar almacenada en una variable</p>
        <pre class="chaptrSubSect__console wScript">
          /* Esto no funciona */
          Â·elem.addEventListener('click', () =&gt; console.log('/Âº Â¡Hola! Âº/'));
          Â·elem.removeEventListener('click', () =&gt; console.log('/Âº Â¡Hola! Âº/'));

          /* Manera correcta */
          function @handler() &#123;
            console.log('/Âº Â¡Hola! Âº/');
          &#125;;

          Â·elem.addEventListener('click', @handler);
          Â·elem.removeEventListener('click', @handler);</pre>
        <p class="chaptrSubSect__p">MÃºltiples llamadas a <code>addEventListener</code> permiten  agregar mÃºltiples handlers, podemos establecerlos usando un propiedad <span class="bttn">DOM</span> como <code>addEventListener</code> juntos</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          &lt;Â·input Âºtype='button' Âºid='elem' Âºvalue='/Âº clickMe! Âº/'&gt;
          
          /* js */
          function @handler1() &#123;
            console.log('/Âº Â¡Gracias! Âº/');
          &#125;;

          function @handler2() &#123;
            console.log('/Âº Â¡Gracias de nuevo! Âº/');
          &#125;;

          Â·elem.onclick = () =&gt; console.log('/Âº Â¡Hola! Âº/'); â‹— /Âº Â¡Hola! Âº/
          Â·elem.addEventListener('click', @handler1);   â‹— /Âº Â¡Gracias! Âº/
          Â·elem.addEventListener('click', @handler2);   â‹— /Âº Â¡Gracias de nuevo! Âº/
          /* Al pulsar en el botÃ³n se ejecutan los 3 eventos a la vez */</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Objeto del evento" codeText="">
        <p class="chaptrSubSect__p">Cuando ocurre un evento en el navegador (como un clic, el movimiento del mouse, o la pulsaciÃ³n de una tecla), el navegador crea automÃ¡ticamente un objeto del evento que contiene toda la informaciÃ³n necesaria para manejar ese evento. Este objeto se pasa como argumento al manejador del evento</p>
        <p class="chaptrSubSect__p">Estas propiedades estÃ¡n disponibles para la mayorÃ­a de los eventos</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>type</code>: Indica el tipo de evento (<code>click</code>, <code>keydown</code>, <code>submit</code>).</li>
          <li class="chaptrSubSectUl__li"><code>currentTarget</code>: Elemento que estÃ¡ manejando el evento (similar a <code>this</code> en los manejadores tradicionales, pero mÃ¡s confiable)</li>
          <li class="chaptrSubSectUl__li"><code>target</code>: Elemento original donde ocurriÃ³ el evento, que puede ser diferente de <code>currentTarget</code> si el evento se propagÃ³ desde un hijo.</li>
          <li class="chaptrSubSectUl__li"><code>timeStamp</code>: Tiempo desde que se cargÃ³ la pÃ¡gina hasta que ocurriÃ³ el evento.</li>
          <li class="chaptrSubSectUl__li"><strong>MÃ©todos comunes:</strong></li>
          <li class="chaptrSubSectUl__li--sub"><code>preventDefault</code>: Evita la acciÃ³n predeterminada del navegador (e.g., evitar el envÃ­o de un formulario).</li>
          <li class="chaptrSubSectUl__li--sub"><code>stopPropagation</code>: Detiene la propagaciÃ³n del evento a otros elementos.</li>
        </ul>
        <p class="chaptrSubSect__p">Esta es la sintaxis de uso genÃ©rica para manejar eventos y trabajar con las propiedades comunes del objeto del evento</p>
        <pre class="chaptrSubSect__console wScript">
          document.addEventListener('tipoDeEvento', (Ã§event) =&gt; &#123;
            /* Acceder al tipo de evento */
            console.log(Ã§event.Âºtype);
          
            /* Acceder al elemento que maneja el evento */
            console.log(Ã§event.ÂºcurrentTarget);
          
            /* Acceder al elemento que originalmente disparÃ³ el evento */
            console.log(Ã§event.Âºtarget);
          
            /* Tiempo desde que se cargÃ³ la pÃ¡gina hasta que ocurriÃ³ el evento */
            console.log(Ã§event.ÂºtimeStamp);
          
            /* MÃ©todos comunes */
            Ã§event.@preventDefault(); /* Evita la acciÃ³n predeterminada */
          &#125;);
        </pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Objeto handler" codeText="">
        <p class="chaptrSubSect__p">Un objeto <span class="bttn">handler</span> es un objeto que puede ser usado como manejador de eventos. Para que funcione, debe implementar un mÃ©todo llamado <code>handleEvent</code>, que serÃ¡ llamado automÃ¡ticamente cuando ocurra un evento.</p>
        <p class="chaptrSubSect__p">Su ventaja principal es que permite estructurar el cÃ³digo mejor que con simples funciones, especialmente cuando un mismo objeto necesita manejar varios tipos de eventos.</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          &lt;Â·button Âºid='boton'&gt;clickMe&lt;/Â·button&gt;

          /* js */
          let Ã§myObj = &#123;
             @handleEvent(Ã§event) &#123;
              console.log(Ã§event.Âºtype, Ã§event.ÂºcurrentTarget);
             &#125;
          &#125;;

          Â·elem.addEventListener('click', Ã§myObj);
          â‹— click /Âº &lt;button class='boton'&gt;clickMe&lt;/button&gt; Âº/
        </pre>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="PropagaciÃ³n y captura" codeText="">
      <ChaptrSubSect h4Title="PropagaciÃ³n" codeText="bubbling">
        <p class="chaptrSubSect__p">Cuando un evento ocurre en un elemento, este primero ejecuta los manejadores que tiene asignados, luego los manejadores de su padre, y asÃ­ hasta otros ancestros</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;Â·div&gt;DIV Âº/
              /Âº &lt;Â·p id="inner"&gt;P Âº/
                  /Âº &lt;Â·button id="button"&gt;ClickMe&lt;/Â·button&gt; Âº/
              /Âº &lt;/Â·p&gt; Âº/
          /Âº &lt;/Â·div&gt; Âº/
        
          /* js */
          const Â·outer = document.getElementById('outer');
          const Â·inner = document.getElementById('inner');
          const Â·button = document.getElementById('button');

          function @logEvent(â€¢event) &#123;
            console.log(`/Âº Evento del $&#123; Âº/this.ÂºtagName/Âº &#125; Âº/`);
          &#125;;

          // AÃ±adimos manejadores a todos los niveles
          Â·outer.addEventListener('click', @logEvent);
          Â·inner.addEventListener('click', @logEvent);
          Â·button.addEventListener('click', @logEvent);

          /* pulsamos en button */
          â‹— /Âº Evento del BUTTON Âº/
          â‹— /Âº Evento del P Âº/
          â‹— /Âº Evento del DIV Âº/

          /* pulsamos en p */
          â‹— /Âº Evento del P Âº/
          â‹— /Âº Evento del DIV Âº/

          /* pulsamos en div */
          â‹— /Âº Evento del DIV Âº/</pre>
        <p class="chaptrSubSect__p">AsÃ­ si hacemos clic en <code>&lt;button&gt;</code>, veremos 3 logs: <code>button</code> â†’ <code>p</code> â†’ <code>div</code></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><strong>Primero:</strong> se ejecuta el <code>event</code> del <code>&lt;button&gt;</code> y burbujea hasta el elemento padre.</li>
          <li class="chaptrSubSectUl__li"><strong>Segundo:</strong> se ejecuta el <code>event</code> del <code>&lt;p&gt;</code> y burbujea hasta el elemento padre.</li>
          <li class="chaptrSubSectUl__li"><strong>Tercero:</strong> se ejecuta el <code>event</code> del <code>&lt;div&gt;</code>.</li>
        </ul>
        <p class="chaptrSubSect__p">Este proceso se conoce como <mark>propagaciÃ³n</mark> porque los eventos â€œse propaganâ€ desde el elemento mÃ¡s al interior, a travÃ©s de los padres, como una burbuja en el agua <mark>bubbling</mark></p>
        <img class="chaptrSubSect__img" src=`${ruta}img13.webp` alt="Propagacion evento">
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="" codeText="event.target">
        <p class="chaptrSubSect__p">Para saber dÃ³nde realmente ocurriÃ³ el evento usamos <code>event.target</code></p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;Â·div id="outer"&gt;DIV Âº/
              /Âº &lt;Â·p id="inner"&gt;P Âº/
                  /Âº &lt;Â·button id="button"&gt;ClickMe&lt;/Â·button&gt; Âº/
              /Âº &lt;/Â·p&gt; Âº/
          /Âº &lt;/Â·div&gt; Âº/
        
          /* js */
          const Â·outer = document.getElementById('outer');
          const Â·inner = document.getElementById('inner');
          const Â·button = document.getElementById('button');

          function @logEvent(â€¢event) &#123;
            console.log(`Click en $/Âº &#123; Âº/â€¢event.Âºtarget.ÂºtagName/Âº &#125; Âº/, Evento del $/Âº &#123; Âº/this.ÂºtagName/Âº &#125; Âº/`);
          &#125;;

          // AÃ±adimos manejadores a todos los niveles
          Â·outer.addEventListener('click', @logEvent);
          Â·inner.addEventListener('click', @logEvent);
          Â·button.addEventListener('click', @logEvent);

          /* pulsamos en button */
          â‹— /Âº Click en BUTTON, Evento del BUTTON Âº/
          â‹— /Âº Click en BUTTON, Evento del P Âº/
          â‹— /Âº Click en BUTTON, Evento del DIV Âº/

          /* pulsamos en p */
          â‹— /Âº Click en P, Evento del P Âº/
          â‹— /Âº Click en P, Evento del DIV Âº/

          /* pulsamos en div */
          â‹— /Âº Click en DIV, Evento del DIV Âº/</pre>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>event.target</code> es el elemento actual dentro de el <code>&lt;div&gt;</code> al que se le hizo clic.</li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Detener la propagaciÃ³n" codeText="event.stopPropagation()">
        <p class="chaptrSubSect__p">Una propagaciÃ³n de evento empieza desde el elemento objetivo hacia arriba. Normalmente este continÃºa hasta <code>&lt;html&gt;</code> y luego hacia el objeto <span class="bttn">document</span>, algunos eventos incluso alcanzan <span class="bttn">window</span>, llamando a todos los manejadores en el camino</p>
        <p class="chaptrSubSect__p">Pero cualquier manejador podrÃ­a decidir que el evento se ha procesado por completo y detener su propagaciÃ³n. El mÃ©todo para esto es <code>event.stopPropagation()</code></p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;Â·div id="outer"&gt;DIV Âº/
              /Âº &lt;Â·p id="inner"&gt;P Âº/
                  /Âº &lt;Â·button id="button"&gt;ClickMe&lt;/Â·button&gt; Âº/
              /Âº &lt;/Â·p&gt; Âº/
          /Âº &lt;/Â·div&gt; Âº/
        
          /* js */
          const Â·outer = document.getElementById('outer');
          const Â·inner = document.getElementById('inner');
          const Â·button = document.getElementById('button');

          function @logEvent(â€¢event) &#123;
            console.log(`Click en $/Âº &#123; Âº/â€¢event.Âºtarget.ÂºtagName/Âº &#125; Âº/, Evento del $/Âº &#123; Âº/this.ÂºtagName/Âº &#125; Âº/`);
          &#125;;

          function @logEventStop(â€¢event) &#123;
            console.log(`Click en $/Âº &#123; Âº/â€¢event.Âºtarget.ÂºtagName/Âº &#125; Âº/, Evento del $/Âº &#123; Âº/this.ÂºtagName/Âº &#125; Âº/`);
            â€¢event.@stopPropagation();
            console.log('PropagaciÃ³n detenida');
          &#125;;

          // AÃ±adimos manejadores a todos los niveles
          Â·outer.addEventListener('click', @logEvent);
          Â·inner.addEventListener('click', @logEvent);
          Â·button.addEventListener('click', @logEventStop);

          /* pulsamos en button */
          â‹— Click en BUTTON, Evento del BUTTON
          â‹— PropagaciÃ³n detenida

          /* pulsamos en p */
          â‹— Click en P, Evento del P
          â‹— Click en P, Evento del DIV

          /* pulsamos en div */
          â‹— Click en DIV, Evento del DIV</pre>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">SÃ³lo hemos detenido la propagaciÃ³n del evento del <code>&lt;button&gt;</code>.</li>
          <li class="chaptrSubSectUl__li">Detiene la propagaciÃ³n hacia arriba, pero todos los manejadores en el elemento actual se ejecutarÃ¡n</li>
          <li class="chaptrSubSectUl__li">Para detener la propagaciÃ³n y prevenir que los manejadores del elemento actual se ejecuten, se usa <code>event.stopImmediatePropagation()</code>.</li>
          <li class="chaptrSubSectUl__li">La propagaciÃ³n es conveniente. <mark>No la detengas sin una necesidad real</mark>, obvia y arquitectÃ³nicamente bien pensada.</li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Un solo manejador" codeText="">
        <p class="chaptrSubSect__p">Podemos usar un solo manejador en el elemento mÃ¡s exterior y detectar en que elemento dentro de ese mismo se ha pulsado</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;Â·div id="outer"&gt;DIV Âº/
              /Âº &lt;Â·p id="inner"&gt;P Âº/
                  /Âº &lt;Â·button id="button"&gt;ClickMe&lt;/Â·button&gt; Âº/
              /Âº &lt;/Â·p&gt; Âº/
          /Âº &lt;/Â·div&gt; Âº/
        
          /* js */
          const Â·outer = document.getElementById('outer');

          function @logEvent(â€¢event) &#123;
            console.log(`Click en $/Âº &#123; Âº/â€¢event.Âºtarget.ÂºtagName/Âº &#125; Âº/, Evento del $/Âº &#123; Âº/this.ÂºtagName/Âº &#125; Âº/`);
          &#125;;

          // AÃ±adimos el manejador al elemento exterior
          Â·outer.addEventListener('click', @logEvent);

          /* pulsamos en button */
          â‹— /Âº Click en BUTTON, Evento del DIV Âº/

          /* pulsamos en p */
          â‹— /Âº Click en P, Evento del DIV Âº/

          /* pulsamos en div */
          â‹— /Âº Click en DIV, Evento del DIV Âº/</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Captura" codeText="">
        <p class="chaptrSubSect__p">Hay 3 fases de la propagaciÃ³n de eventos</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><strong>Fase de captura:</strong> el evento desciende al elemento.</li>
          <li class="chaptrSubSectUl__li"><strong>Fase de objetivo:</strong> el evento alcanza al elemento.</li>
          <li class="chaptrSubSectUl__li"><strong>Fase de propagaciÃ³n:</strong> el evento se propaga hacia arriba del elemento.</li>
        </ul>
        <img class="chaptrSubSect__img" src=`${ruta}img14.webp` alt="Captura del evento">
        <p class="chaptrSubSect__p">Se explica asÃ­: por un clic en <code>&lt;td&gt;</code> el evento va primero a travÃ©s de la cadena de ancestros hacia el elemento en la fase de <mark>captura</mark>, luego alcanza el objetivo y se desencadena ahÃ­ la fase <mark>objetivo</mark>, y por Ãºltimo va hacia arriba en la fase de <mark>propagaciÃ³n</mark>, ejecutando los manejadores en su camino</p>
        <p class="chaptrSubSect__p">La fase de captura es invisible para nosotros, porque los manejadores agregados que usan la propiedad <code>on&lt;event&gt;</code>, usan atributos <span class="bttn">HTML</span>, Ã³ <code>addEventListener()</code> de dos argumentos (<code>event</code>, <code>handler</code>), no ven la fase de captura, Ãºnicamente se ejecutan en la 2da y 3ra fase. Para atrapar un evento en la fase de captura, necesitamos preparar la opciÃ³n <code>capture</code> como <code>true</code> en el manejador</p>
        <pre class="chaptrSubSect__console wScript">
          Â·elem.addEventListener(..., &#123;capture: true&#125;)

          /* o solamente */
          Â·elem.addEventListener(..., true)</pre>
        <p class="chaptrSubSect__p">Hay dos posibles valores para la opciÃ³n <code>capture</code></p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>false</code>: (por defecto) el handler es preparado para la fase de propagaciÃ³n.</li>
          <li class="chaptrSubSectUl__li"><code>true</code>: el handler es preparado para la fase de captura.</li>
        </ul>
        <p class="chaptrSubSect__p">Aunque formalmente hay 3 fases, la 2da fase (â€œla fase de objetivoâ€: el evento alcanzÃ³ el elemento) no es manejada de forma separada; los manejadores en ambas fases, la de captura y propagaciÃ³n, se disparan en esa fase</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;Â·div&gt;DIV Âº/
              /Âº &lt;Â·p&gt;P Âº/
                  /Âº &lt;Â·button&gt;ClickMe&lt;/Â·button&gt; Âº/
              /Âº &lt;/Â·p&gt; Âº/
          /Âº &lt;/Â·div&gt; Âº/
        
          /* js */
          for(let elem of document.querySelectorAll('*')) &#123;
            Â·elem.addEventListener('click', (Ã§event) =&gt; console.log(`Captura: $&#123;Â·elem.tagName&#125;`), true);
            Â·elem.addEventListener('click', (Ã§event) =&gt; console.log(`PropagaciÃ³n: $&#123;Â·elem.tagName&#125;`));
          &#125;

          /* pulsamos en button */
          â‹— /Âº Captura: HTML Âº/
          â‹— /Âº Captura: BODY Âº/
          â‹— /Âº Captura: DIV Âº/
          â‹— /Âº Captura: P Âº/
          â‹— /Âº Captura: BUTTON Âº/
          â‹— /Âº PropagaciÃ³n: BUTTON Âº/
          â‹— /Âº PropagaciÃ³n: P Âº/
          â‹— /Âº PropagaciÃ³n: DIV Âº/
          â‹— /Âº PropagaciÃ³n: BODY Âº/
          â‹— /Âº PropagaciÃ³n: HTML Âº/</pre>
        <p class="chaptrSubSect__p">Para quitar el manejador, <code>removeEventListener</code> necesita la misma fase</p>
        <pre class="chaptrSubSect__console wScript">
          /* si agregamos */
          addEventListener(..., true);

          /* debemos mencionar la misma fase */
          removeEventListener(..., true);</pre>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="DelegaciÃ³n de eventos" codeText="">
      <ChaptrSubSect h4Title="ExplicaciÃ³n" codeText="">
        <p class="chaptrSubSect__p">Si tenemos muchos elementos manejados de manera similar podemos, en lugar de asignar un manejador a cada uno de ellos, poner un Ãºnico manejador a su ancestro comÃºn</p>
        <pre class="chaptrSubSect__console wScript">
          /* hmtl */
          /Âº &lt;table id='table'&gt;; Âº/
            /Âº &lt;tr&gt; Âº/
              /Âº &lt;td class='nw'&gt;&lt;strong&gt;Northwest&lt;/strong&gt;&lt;br&gt;Metal&lt;br&gt;Silver&lt;br&gt;Elders&lt;/td&gt; Âº/
              /Âº &lt;td class='n'&gt;&lt;strong&gt;North&lt;/strong&gt;&lt;br&gt;Water&lt;br&gt;Blue&lt;br&gt;Change&lt;/td&gt; Âº/
              /Âº &lt;td class='ne'&gt;&lt;strong&gt;Northeast&lt;/strong&gt;&lt;br&gt;Earth&lt;br&gt;Yellow&lt;br&gt;Direction&lt;/td&gt; Âº/
            /Âº &lt;/tr&gt; Âº/
            /Âº &lt;tr&gt; Âº/
              /Âº &lt;td class='w'&gt;&lt;strong&gt;West&lt;/strong&gt;&lt;br&gt;Metal&lt;br&gt;Gold&lt;br&gt;Youth&lt;/td&gt; Âº/
              /Âº &lt;td class='c'&gt;&lt;strong&gt;Center&lt;/strong&gt;&lt;br&gt;All&lt;br&gt;Purple&lt;br&gt;Harmony&lt;/td&gt; Âº/
              /Âº &lt;td class='e'&gt;&lt;strong&gt;East&lt;/strong&gt;&lt;br&gt;Wood&lt;br&gt;Blue&lt;br&gt;Future&lt;/td&gt; Âº/
            /Âº &lt;/tr&gt; Âº/
            /Âº &lt;tr&gt; Âº/
              /Âº &lt;td class='sw'&gt;&lt;strong&gt;Southwest&lt;/strong&gt;&lt;br&gt;Earth&lt;br&gt;Brown&lt;br&gt;Tranquility&lt;/td&gt; Âº/
              /Âº &lt;td class='s'&gt;&lt;strong&gt;South&lt;/strong&gt;&lt;br&gt;Fire&lt;br&gt;Orange&lt;br&gt;Fame&lt;/td&gt; Âº/
              /Âº &lt;td class='se'&gt;&lt;strong&gt;Southeast&lt;/strong&gt;&lt;br&gt;Wood&lt;br&gt;Green&lt;br&gt;Romance&lt;/td&gt; Âº/
            /Âº &lt;/tr&gt; Âº/
          /Âº &lt;/table&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* css */
          /Âº table &#123; Âº/
            /Âº margin-inline: auto; Âº/
            /Âº background-color: darkcyan; Âº/
            /Âº border: 2px solid black; Âº/
            /Âº border-radius: 0.3em; Âº/
            /Âº margin-block-start: 4em; Âº/
          /Âº &#125; Âº/

          /Âº td &#123; Âº/
            /Âº border: 1px solid gray; Âº/
            /Âº border-radius: 0.3em; Âº/
            /Âº padding: 0.3em; Âº/
            /Âº color: white; Âº/
            /Âº text-align: center; Âº/
          /Âº &#125; Âº/

          /Âº .nw&#123; Âº/
            /Âº background-color: gray; Âº/
            /Âº color: black; Âº/
          /Âº &#125; Âº/
          /Âº .n&#123; Âº/
            /Âº background-color: blue; Âº/
            /Âº color: white; Âº/
          /Âº &#125; Âº/
          /Âº .ne&#123; Âº/
            /Âº background-color: lightyellow; Âº/
            /Âº color: black; Âº/
          /Âº &#125; Âº/
          /Âº .w&#123; Âº/
            /Âº background-color: yellow; Âº/
            /Âº color: black; Âº/
          /Âº &#125; Âº/
          /Âº .c&#123; Âº/
            /Âº background-color: blueviolet; Âº/
            /Âº color: white; Âº/
          /Âº &#125; Âº/
          /Âº .e&#123; Âº/
            /Âº background-color: cyan; Âº/
            /Âº color: black; Âº/
          /Âº &#125; Âº/
          /Âº .sw&#123; Âº/
            /Âº background-color: brown; Âº/
            /Âº color: white; Âº/
          /Âº &#125; Âº/
          /Âº .s&#123; Âº/
            /Âº background-color: orange; Âº/
            /Âº color: white; Âº/
          /Âº &#125; Âº/
          /Âº .se&#123; Âº/
            /Âº background-color: green; Âº/
            /Âº color: white; Âº/
          /Âº &#125; Âº/
          /Âº .highlight&#123; Âº/
            /Âº background-color: red; Âº/
          /Âº &#125; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          let Â·selectedTd;
          const Â·myTable = document.getElementById('table');
          Â·myTable.addEventListener('click', (Ã§event) =&gt; &#123;
            let Â·td = Ã§event.Âºtarget.closest('td');	  /* 1 */
            if(!Â·td)&#123;    /* 2 */
              console.log(`No se pulsÃ³ en un td`);
              return		
            &#125;
            if(!table.contains(td))&#123;   /* 3 */
              console.log(`Esta tabla no contiene ese td`);
              return		
            &#125;
            console.log(`Se pulsÃ³ en $&#123;td.tagName&#125;`)
            @highlight(Â·td);    /* 4 */
          &#125;)

          function @highlight(Â·td)&#123;
            if(Â·selectedTd)&#123;
              Â·selectedTd.classList.Âºremove('highlight');
            &#125;
            Â·selectedTd = Â·td;
            Â·selectedTd.classList.add('highlight');
            @setTimeout(() =&gt; &#123;
              Â·selectedTd.classList.Âºremove('highlight');
            &#125;, Â¬300)
            
          &#125;</pre>
        <p class="chaptrSubSect__p">Podemos ver tags anidados dentro de <code>&lt;td&gt;</code>, como <code>&lt;strong&gt;</code>, si el clic ocurre en <code>&lt;strong&gt;</code>, este se vuelve el valor de <code>event.target</code></p>
        <img class="chaptrSubSect__img" src=`${ruta}img15.webp` alt="captura del evento">
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><strong>1 Â·</strong> El mÃ©todo <code>elem.closest(selector)</code> devuelve el ancestro mÃ¡s cercano que coincide con el selector. En nuestro caso buscamos <code>&lt;td&gt;</code> hacia arriba desde el elemento de origen.</li>
          <li class="chaptrSubSectUl__li"><strong>2 Â·</strong> Si <code>event.target</code> no ocurriÃ³ dentro de algÃºn <code>&lt;td&gt;</code>, el llamado retorna inmediatamente pues no hay nada que hacer.</li>
          <li class="chaptrSubSectUl__li"><strong>3 Â·</strong> En caso de tablas anidadas, <code>event.target</code> podrÃ­a ser un <code>&lt;td&gt;</code>, pero fuera de la tabla actual. Entonces verificamos que sea realmente un <code>&lt;td&gt;</code> de nuestra tabla.</li>
          <li class="chaptrSubSectUl__li"><strong>4 Â·</strong> Si cumple todo, destacarla.</li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Ejemplo de delegaciÃ³n" codeText="">
        <p class="chaptrSubSect__p">Hay otros usos para la delegaciÃ³n de eventos. Digamos que queremos hacer un menÃº con los botones <span class="bttn">Save</span>, <span class="bttn">Load</span>, <span class="bttn">Search</span>. Y hay objetos con los mÃ©todos <code>save</code>, <code>load</code>, <code>search</code> Â¿CÃ³mo asociarlos? La primera idea podrÃ­a ser asignar un controlador separado para cada botÃ³n. Pero hay una soluciÃ³n mÃ¡s elegante. Podemos agregar un controlador para el menÃº completo y un atributo <code>data-action</code> a los botones con el mÃ©todo a llamar</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id="menu"&gt; Âº/
            /Âº &lt;button data-action="save"&gt;Save&lt;/button&gt; Âº/
            /Âº &lt;button data-action="load"&gt;Load&lt;/button&gt; Âº/
            /Âº &lt;button data-action="search"&gt;Search&lt;/button&gt; Âº/
          /Âº &lt;/div&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          class Ã§Menu &#123;
            constructor(â€¢elem) &#123;
              this._elem = â€¢elem;
              this._handleClick = this.ÂºhandleClick.bind(this);   /* Enlazamos el contexto */
              this._elem.addEventListener('click', this._handleClick);
            &#125;
            @save() &#123;
              console.log('saving');
            &#125;
            @load() &#123;
              console.log('loading');
            &#125;
            @search() &#123;
              console.log('searching');
            &#125;
            @handleClick(Ã§event) &#123;
              const Â·action = Ã§event.Âºtarget.Âºdataset.Â·action;  /* Leemos el atributo data-action */
              if (Â·action && typeof this[Â·action] === 'function') &#123;
                this[Â·action]();  /* Llamamos al mÃ©todo correspondiente */
              &#125;
            &#125;
            @destroy() &#123;
              this._elem.removeEventListener('click', this._handleClick);
            &#125;
          &#125;
          
          const Â·menu = new Ã§Menu(document.getElementById('menu'));</pre>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="Acciones predeterminadas" codeText="">
      <ChaptrSubSect h4Title="Evitar las acciones del navegador" codeText="">
        <p class="chaptrSubSect__p">Hay dos formas de decirle al navegador que no queremos que actÃºe</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li">Utilizar el mÃ©todo <code>event.preventDefault()</code>. <mark>Recomendado</mark>.</li>
          <li class="chaptrSubSectUl__li">Si el controlador se asigna usando <code>on&lt;event&gt;</code>, entonces devolver <code>false</code>.</li>
        </ul>
        <pre class="chaptrSubSect__console wScript">
          /Âº &lt;a href="/" onclick="return false"&gt;Haz click aquÃ­&lt;/a&gt; Âº/
          /* o */
          /Âº &lt;a href="/" onclick="event.preventDefault()"&gt;Click aquÃ­&lt;/a&gt; Âº/</pre>
        <p class="chaptrSubSect__p">Ejemplo de menu</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;ul id="menu" class="menu"&gt; Âº/
            /Âº &lt;li&gt;&lt;a href="/html"&gt;HTML&lt;/a&gt;&lt;li&gt; Âº/
            /Âº &lt;li&gt;&lt;a href="/javascript"&gt;JavaScript&lt;/a&gt;&lt;li&gt; Âº/
            /Âº &lt;li&gt;&lt;a href="/css"&gt;CSS&lt;/a&gt;&lt;li&gt; Âº/
          /Âº &lt;/ul&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* css */
          /Âº .menu li &#123; Âº/
            /Âº display: inline-block; Âº/
            /Âº margin: 0; Âº/
          /Âº &#125; Âº/
          
          /Âº .menu &gt; li a &#123; Âº/
            /Âº display: inline-block; Âº/
            /Âº margin: 0 2px; Âº/
            /Âº outline: none; Âº/
            /Âº text-align: center; Âº/
            /Âº text-decoration: none; Âº/
            /Âº font: 14px/100% sans-serif; Âº/
            /Âº padding: .5em 2em .55em; Âº/
            /Âº text-shadow: 0 1px 1px rgba(0, 0, 0, .3); Âº/
            /Âº border-radius: .5em; Âº/
            /Âº box-shadow: 0 1px 2px rgba(0, 0, 0, .2); Âº/
            /Âº color: #d9eef7; Âº/
            /Âº border: solid 1px #0076a3; Âº/
            /Âº background: #0095cd; Âº/
          /Âº &#125; Âº/
          
          /Âº .menu &gt; li:hover a &#123; Âº/
            /Âº text-decoration: none; Âº/
            /Âº background: #007ead; Âº/
          /Âº &#125; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·menu = document.getElementById('menu');
          Â·menu.addEventListener('click', (Ã§event) =&gt; &#123;
            if (Ã§event.Âºtarget.ÂºnodeName !== 'A') &#123;
              console.log('/Âº No se pulsÃ³ dentro de un botÃ³n! Âº/')
              return
            &#125;
            let Â·href = Ã§event.Âºtarget.@getAttribute('href');
            console.log(Â·href);
            Ã§event.@preventDefault()
          &#125;)
        </pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="La opciÃ³n de controlador 'pasivo'" codeText="">
        <p class="chaptrSubSect__p">La opciÃ³n opcional <code>passive:true</code> de <code>addEventListener</code> indica al navegador que el controlador no llamarÃ¡ a <code>preventDefault()</code></p>
        <p class="chaptrSubSect__p">Hay algunos eventos como touchmove en dispositivos mÃ³viles, que provocan el desplazamiento por defecto, pero ese desplazamiento se puede evitar usando <code>preventDefault()</code> en el controlador.</p>
        <p class="chaptrSubSect__p">Las opciones <code>passive: true</code> le dicen al navegador que el controlador no va a cancelar el desplazamiento. Entonces el navegador se desplaza de inmediato para brindar una experiencia con la mÃ¡xima fluidez, y el evento se maneja de inmediato</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="" codeText="event.defaultPrevented">
        <p class="chaptrSubSect__p">La propiedad <code>event.defaultPrevented</code> es <code>true</code> si se impidiÃ³ la acciÃ³n predeterminada y <code>false</code> en caso contrario</p>
        <p class="chaptrSubSect__p">Podemos usar <code>event.defaultPrevented</code> en lugar de <code>event.stopPropagation()</code>, para seÃ±alar a otros controladores de eventos que el evento fue manejado</p>
        <pre class="chaptrSubSect__console wScript">
          /Âº &lt;button&gt;El clic derecho muestra el menÃº contextual del navegador&lt;/button&gt; Âº/

          /Âº &lt;button oncontextmenu="alert('Dibuja nuestro menÃº'); return false"&gt; Âº/
            El clic derecho muestra nuestro menÃº contextual
          /Âº &lt;/button&gt; Âº/</pre>
        <p class="chaptrSubSect__p">Por defecto, el navegador en el evento <code>contextmenu</code> (clic derecho del ratÃ³n) muestra un menÃº contextual con opciones estÃ¡ndar. AquÃ­ se previene en el segundo botÃ³n y se muestra nuestro menÃº</p>
        <p class="chaptrSubSect__p">Una soluciÃ³n alternativa verificar en el controlador <code>document</code> si se evitÃ³ la acciÃ³n predeterminada</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;p&gt;Right click&lt;/p&gt; Âº/
          /Âº &lt;button id="elem"&gt;Right click para el menÃº de botones&lt;/button&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·elem = document.getElementById('elem');
          Â·elem.Âºoncontextmenu = @function(Ã§event) &#123;
            Ã§event.@preventDefault();
            alert('MenÃº contextual del botÃ³n');
          &#125;;
        
          document.Âºoncontextmenu = @function(Ã§event) &#123;
            if (Ã§event.ÂºdefaultPrevented) return;
        
            Ã§event.@preventDefault();
            alert('MenÃº contextual del documento');
          &#125;;</pre>
        <p class="chaptrSubSect__p">Ahora todo funciona correctamente. Si tenemos elementos anidados, y cada uno de ellos tiene un menÃº contextual propio, eso tambiÃ©n funcionarÃ­a. Solo asegÃºrate de buscar <code>event.defaultPrevented</code> en cada controlador de <code>contextmenu</code></p>
      </ChaptrSubSect>
    </ChaptrSect>
    <ChaptrSect h3Title="Eventos personalizados" codeText="">
      <ChaptrSubSect h4Title="Contructor de eventos" codeText="">
        <p class="chaptrSubSect__p">Las clases de eventos integradas forman una jerarquÃ­a, similar a las clases de elementos <span class="bttn">DOM</span>. La raÃ­z es la clase incorporada <code>Event</code></p>
        <pre class="chaptrSubSect__console wScript">
          let Â·event = new @Event(â€¢type[, â€¢options]);</pre>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>type</code>: tipo de event, un string como <code>click</code> o nuestro propio evento como "mi-evento"</li>
          <li class="chaptrSubSectUl__li"><code>options</code>: el objeto con 2 propiedades opcionales</li>
          <ul class="chaptrSubSect__ul">
            <li class="chaptrSubSectUl__li"><code>bubbles</code>: <code>true</code>/<code>false</code> â€“ si es <code>true</code>, entonces el evento se propaga.</li>
            <li class="chaptrSubSectUl__li"><code>cancelable</code>: <code>true</code>/<code>false</code> â€“ si es <code>true</code>, entonces la â€œacciÃ³n predeterminadaâ€ puede ser prevenida. MÃ¡s adelante veremos quÃ© significa para los eventos personalizados.</li>
          </ul>
          <li class="chaptrSubSectUl__li">Por defecto, los dos son <code>false</code>: <code>&#123;bubbles: false, cancelable: false&#125;</code></li>
        </ul>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="" codeText="dispatchEvent">
        <p class="chaptrSubSect__p">DespuÃ©s de que se crea un objeto de evento, debemos â€œejecutarloâ€ en un elemento usando la llamada <code>elem.dispatchEvent(event)</code></p>
        <p class="chaptrSubSect__p">Los controladores reaccionan como si fuera un evento normal del navegador. Si el evento fue creado con la bandera <code>bubbles</code>, entonces se propaga</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;button id="elem" onclick="alert('Click');"&gt;Click automÃ¡tico&lt;/button&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·elem = document.getElementById('elem');
          let Â·event = new @Event('click');
          Â·elem.@dispatchEvent(Â·event);</pre>
        <p class="chaptrSubSect__p">Hay una forma de diferenciar un evento de usuario â€œrealâ€ de uno generado por script. La propiedad <code>event.isTrusted</code> es <code>true</code> para eventos que provienen de acciones de usuarios reales y <code>false</code> para eventos generados por script</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;button id="miBoton"&gt;Click aquÃ­&lt;/button&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·boton = document.getElementById('miBoton');
          Â·boton.addEventListener('click', (Ã§event) =&gt; &#123;
            if(Ã§event.ÂºisTrusted) &#123;  /* /Âº Si es original entra en el if Âº/ */
              console.log('Click REAL del usuario');
            &#125; else &#123;  /* Si es creado por javascript */
              console.log('Click SIMULADO por JavaScript');
            &#125;  /* Muestra siempre el tipo de evento */
            console.log(`Tipo de evento: $&#123;Ã§event.Âºtype&#125;`);
          &#125;);
          /* simulamos un click tras 2seg */
          @setTimeout(() =&gt; &#123;
            let Â·eventoSimulado = new @Event('click');  /* creamos el evento */
            Â·boton.@dispatchEvent(Â·eventoSimulado);   /* lo disparamos */
          &#125;, Â¬2000);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Ejemplo de Bubbling con evento personalizados" codeText="">
        <p class="chaptrSubSect__p">La clave para entender el <span class="bttn">bubbling</span> de eventos personalizados estÃ¡ en visualizar cÃ³mo el evento "sube" por el Ã¡rbol del <span class="bttn">DOM</span></p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;div id="casa"&gt; Âº/
            /Âº &lt;div id="salaDeEstar"&gt; Âº/
              /Âº &lt;div id="cocina"&gt; Âº/
                /Âº &lt;button id="botonRumor"&gt;Inicia Rumor&lt;/button&gt; Âº/
              /Âº &lt;/div&gt; Âº/
            /Âº &lt;/div&gt; Âº/
          /Âº &lt;/div&gt; Âº/</pre>
        <pre class="chaptrSubSect__console wScript">
          /* js */
          const Â·casa = document.getElementById('casa');
          const Â·salaDeEstar = document.getElementById('salaDeEstar');
          const Â·cocina = document.getElementById('cocina');
          const Â·botonRumor = document.getElementById('botonRumor');

          Â·casa.addEventListener('rumor', () =&gt; &#123;
            console.log(`El rumor llegÃ³ a la casa. Lo escuchÃ³ $&#123;Ã§event.Âºtarget.Âºid&#125;`);
          &#125;);
          Â·salaDeEstar.addEventListener('rumor', () =&gt; &#123;
            console.log(`El rumor llegÃ³ a la salaDeEstar. Lo escuchÃ³ $&#123;Ã§event.Âºtarget.Âºid&#125;`);
          &#125;);
          Â·cocina.addEventListener('rumor', () =&gt; &#123;
            console.log(`El rumor llegÃ³ a la cocina. Lo escuchÃ³ $&#123;Ã§event.Âºtarget.Âºid&#125;`);
          &#125;);
          
          Â·botonRumor.addEventListener('click', () =&gt; &#123;
            let Â·eventoRumor = new @CustomEvent('rumor', (Ã§event) =&gt; &#123; bubbles: true &#125;);
              Â·botonRumor.@dispatchEvent(Â·eventoRumor);
          &#125;);
          
        </pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Otras clases de eventos UI" codeText="">
        <p class="chaptrSubSect__p">La clase genÃ©rica <code>Event</code> no permite configurar propiedades especÃ­ficas del evento. Solo admite configuraciones bÃ¡sicas como, <code>bubbles</code> y <code>cancelable</code></p>
        <p class="chaptrSubSect__p">Para crear eventos con objetos que tienen propiedades especÃ­ficas dependiendo del tipo de evento, usamos constructores especÃ­ficos como estos</p>
        <ul class="chaptrSubSect__ul">
          <li class="chaptrSubSectUl__li"><code>Event</code>: Clase base para la mayorÃ­a de eventos de UI. No se suele instanciar directamente.</li>
          <li class="chaptrSubSectUl__li"><code>FocusEvent</code>: Eventos relacionados con el foco de elementos, como cuando un input recibe o pierde el foco.</li>
          <li class="chaptrSubSectUl__li"><code>MouseEvent</code>: Eventos del ratÃ³n, como clicks, movimientos y ruedas.</li>
          <li class="chaptrSubSectUl__li"><code>KeyboardEvent</code>: Eventos del teclado, como presionar una tecla.</li>
        </ul>
        <p class="chaptrSubSect__p">Utilizar los constructores especÃ­ficos para cada tipo de evento nos permite definir propiedades Ãºnicas y comportamientos esperados. Siempre es mejor usar el constructor especÃ­fico para el tipo de evento que se quiere crear, ya que permite definir todas las propiedades relevantes y seguir las prÃ¡cticas recomendadas</p>
        <pre class="chaptrSubSect__console wScript">
          let Â·keyboardEvent = new @KeyboardEvent('keydown', &#123;
            bubbles: true,
            cancelable: true,
            key: 'a',
            code: 'KeyA'
          &#125;);

          console.log(Â·keyboardEvent.Âºkey);   â‹— a
          console.log(Â·keyboardEvent.Âºcode);   â‹— KeyA</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Eventos personalizados" codeText="">
        <p class="chaptrSubSect__p">Para nuestros tipos de eventos completamente nuevos, deberÃ­amos usar <code>new</code> <code>CustomEvent</code>. TÃ©cnicamente, <code>CustomEvent</code> es lo mismo que <code>Event</code>, con una excepciÃ³n. En el segundo argumento (objeto) podemos agregar una propiedad adicional <code>detail</code> para cualquier informaciÃ³n personalizada que queramos pasar con el evento</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;button id='counterButton'&gt;Click aquÃ­&lt;/button&gt; Âº/

          /* js */
          const Â·button = document.getElementById('counterButton');
          let Â·clickCount = Â¬0;

          /* Escucha del evento personalizado increment */
          Â·button.addEventListener('increment', (Ã§event) =&gt; &#123;
            console.log(`Click nÃºmero: $&#123;Ã§event.Âºdetail.Âºcount&#125;`);
          &#125;);
          
          /* Manejador para el click del botÃ³n */
          Â·button.addEventListener('click', () =&gt; &#123;
            Â·clickCount++;

            /* Creamos un evento personalizado increment con el detalle del contador */
            const Â·incrementEvent = new @CustomEvent('increment', &#123;
              detail: &#123; count: Â·clickCount &#125;
            &#125;);

            /* Despachamos el evento personalizado */
            Â·button.@dispatchEvent(Â·incrementEvent);
          &#125;);</pre>
        <p class="chaptrSubSect__p">La propiedad <code>detail</code> puede tener cualquier dato. TÃ©cnicamente podrÃ­amos vivir sin Ã©l, porque podemos asignar cualquier propiedad a un objeto <code>new Event</code> regular despuÃ©s de su creaciÃ³n. Pero <code>CustomEvent</code> proporciona el campo especial <code>detail</code> para evitar conflictos con otras propiedades del evento</p>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="" codeText="event.preventDefault()">
        <p class="chaptrSubSect__p">Para eventos nuevos y personalizados, no hay acciones predeterminadas del navegador, pero un cÃ³digo que distribuye dicho evento puede tener sus propios planes de quÃ© hacer despuÃ©s de activar el evento. Al llamar a <code>event.preventDefault()</code>, un controlador de eventos puede enviar una seÃ±al de que esas acciones deben cancelarse. En ese caso, la llamada a <code>elem.dispatchEvent(event)</code> devuelve <code>false</code>. Y el cÃ³digo que lo enviÃ³ sabe que no deberÃ­a continuar</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;pre id='rabbit'&gt; Âº/
                |\   /|
                \|_|/
               /Âº /.  .\ Âº/
            /Âº =\_Y_/= Âº/
             /Âº &#123;&gt;o&lt;&#125; Âº/
          /Âº &lt;/pre&gt; Âº/

          /* js */
          function @hide() &#123;
            let Â·event = new @CustomEvent('hide', &#123;
              cancelable: true;
            &#125;);
            if (!Â·rabbit.@dispatchEvent(Ã§event)) &#123;
              console.log('La acciÃ³n fue impedida por un controlador');
            &#125; else &#123;
              Â·rabbit.Âºhidden = true;
            &#125;;
          &#125;;

          Â·rabbit.addEventListener('hide', (Ã§event) =&gt; &#123;
            if (@confirm('/Âº Â¿Llamar a preventDefault? Âº/')) &#123;
              Ã§event.@preventDefault();
            &#125;;
          &#125;);</pre>
      </ChaptrSubSect>
      <ChaptrSubSect h4Title="Eventos dentro de enventos" codeText="">
        <p class="chaptrSubSect__p">Los eventos dentro de eventos son sincrÃ³nicos, se procesan en una cola</p>
        <p class="chaptrSubSect__p">La excepciÃ³n notable es cuando un evento se inicia desde dentro de otro, por ejemplo, usando <code>dispatchEvent</code>. Dichos eventos se procesan inmediatamente: se llaman los nuevos controladores de eventos y luego se reanuda el manejo de eventos actual.</p>
        <pre class="chaptrSubSect__console wScript">
          /* html */
          /Âº &lt;button id='menu'&gt;Menu (dame click)&lt;/button&gt; Âº/

          /* js */
          const Â·menu = document.getElementById('menu');

          Â·menu.addEventListener('click', () =&gt; &#123;
            console.log('PRIMER LOG');
            Â·menu.@dispatchEvent( new @CustomEvent('/Âº menu-open Âº/', &#123;
              bubbles: true
            &#125;));
            console.log('SEGUNDO LOG');
          &#125;);

          /* se dispara entre PRIMER y SEGUNDO */
          document.addEventListener('/Âº menu-open Âº/', () =&gt; &#123;
            console.log('LOG LISTENER')
          &#125;);
        </pre>
      </ChaptrSubSect>
    </ChaptrSect>
  </LssnArt>
	<Footer slot="mainFooter" />
</MainLayout>

<!-- 
&lt;&gt;
&#123;&#125;
()&#123;&#125;
ï¹›ï¹œ    Llaves no estiladas
ï¹•     2 puntos no estilizados
â€¢parametro
Â·variable
#variable en Func/if/for
Ã§Objetos
â‹— âˆResultado
@funcion()
ÂªMetodos
Â¬numbers
objProperty:
ÂºobjProperty
/* comentario */
'/Âº modo texto quita span Âº/'
<p class="chaptrSubSect__p">
<pre class="chaptrSubSect__console wScript">
<table class="chaptrSubSect__table">
<img class="chaptrSubSect__img" src=`${ruta}img13.webp` alt="captura del evento">
<ul class="chaptrSubSect__ul">
<li class="chaptrSubSectUl__li">
ï¼ƒ
-->
